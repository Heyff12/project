<!DOCTYPE html>
<html>

<head>
    <title>canvas</title>
    <style type="text/css">
    #tutorial {}

    #SomeElementYouWantToAnimate {
        width: 10px;
        height: 10px;
        border: 1px solid red;
        margin: 10px 0;
    }

    img {
        width: 100%;
        height: auto;
    }

    canvas {
        border: 1px solid black;
    }
    </style>
</head>

<body onload="draw();">
    <div id="SomeElementYouWantToAnimate"></div>
    <canvas id="tutorial" width="150" height="150"></canvas>
    <canvas id="tutorial1" width="300" height="300"></canvas>
    <canvas id="tutorial2" width="150" height="150"></canvas>
    <canvas id="tutorial3" width="150" height="150"></canvas>
    <canvas id="tutorial4" width="150" height="150"></canvas>
    <canvas id="tutorial5" width="150" height="150"></canvas>
    <canvas id="tutorial6" width="150" height="150"></canvas>
    <canvas id="tutorial7" width="150" height="150"></canvas>
    <canvas id="tutorial8" width="150" height="150"></canvas>
    <canvas id="tutorial9" width="150" height="150"></canvas>
    <canvas id="tutorial10" width="150" height="150"></canvas>
    <canvas id="tutorial11" width="150" height="150"></canvas>
    <canvas id="tutorial12" width="150" height="150"></canvas>
    <canvas id="tutorial13" width="150" height="150"></canvas>
    <canvas id="tutorial14" width="150" height="150"></canvas>
    <canvas id="tutorial15" width="150" height="150"></canvas>
    <canvas id="tutorial16" width="150" height="150"></canvas>
    <canvas id="tutorial17" width="300" height="300"></canvas>
    <canvas id="tutorial18" width="150" height="150"></canvas>
    <canvas id="tutorial19" width="150" height="150"></canvas>
    <div id="test" style="width:1px;height:17px;background:#0f0;">0%</div>
    <input type="button" value="Run" id="run" />
    <script type="text/javascript">
    window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
    var start = null;
    var ele = document.getElementById("test");
    var progress = 0;

    function step(timestamp) {
        progress += 1;
        ele.style.width = progress + "%";
        ele.innerHTML = progress + "%";
        if (progress < 100) {
            requestAnimationFrame(step);
        }
    }
    //requestAnimationFrame(step);
    document.getElementById("run").addEventListener("click", function() {
        ele.style.width = "1px";
        progress = 0;
        requestAnimationFrame(step);
    }, false);



    // var start = null;
    // var element = document.getElementById('SomeElementYouWantToAnimate');
    // element.style.position = 'absolute';

    // function step(timestamp) {
    //     if (!start) start = timestamp;
    //     console.log(timestamp);
    //     console.log(start);
    //     var progress = timestamp - start;
    //     element.style.left = Math.min(progress / 10, 200) + 'px';
    //     if (progress < 2000) {
    //         window.requestAnimationFrame(step);
    //     }
    // }

    // window.requestAnimationFrame(step);


    // var canvas = document.getElementById('tutorial');
    // // var ctx = canvas.getContext('2d');
    // if (canvas.getContext) {
    //     var ctx = canvas.getContext('2d');
    //     // drawing code here
    // } else {
    //     // canvas-unsupported code here
    //     console.log('您的浏览器暂不支持canvas');
    // }
    var sun = new Image();
    var moon = new Image();
    var earth = new Image();

    function draw() {
        var canvas = document.getElementById('tutorial');
        var canvas1 = document.getElementById('tutorial1');
        var canvas2 = document.getElementById('tutorial2');
        var canvas3 = document.getElementById('tutorial3');
        var canvas4 = document.getElementById('tutorial4');
        var canvas5 = document.getElementById('tutorial5');
        var canvas6 = document.getElementById('tutorial6');
        var canvas7 = document.getElementById('tutorial7');
        var canvas8 = document.getElementById('tutorial8');
        var canvas9 = document.getElementById('tutorial9');
        var canvas10 = document.getElementById('tutorial10');
        var canvas11 = document.getElementById('tutorial11');
        var canvas12 = document.getElementById('tutorial12');
        var canvas13 = document.getElementById('tutorial13');
        var canvas14 = document.getElementById('tutorial14');
        var canvas15 = document.getElementById('tutorial15');
        var canvas16 = document.getElementById('tutorial16');
        var canvas17 = document.getElementById('tutorial17');
        var canvas18 = document.getElementById('tutorial18');
        var canvas19 = document.getElementById('tutorial19');
        if (canvas.getContext) { //判断是否支持canvasS
            //裁剪-------------------------------------------------------------------------
            var ctx = canvas.getContext('2d');
            ctx.fillRect(0, 0, 150, 150);
            ctx.translate(75, 75);
            // Create a circular clipping path
            ctx.beginPath();
            // ctx.rect(0, 0, 110, 110);
            ctx.arc(0, 0, 60, 0, Math.PI * 2, true);
            ctx.clip();
            // draw background
            var lingrad = ctx.createLinearGradient(0, -75, 0, 75);
            lingrad.addColorStop(0, '#232256');
            lingrad.addColorStop(1, '#143778');
            ctx.fillStyle = lingrad;
            ctx.fillRect(-75, -75, 150, 150);
            // draw stars
            for (var j = 1; j < 50; j++) {
                ctx.save();
                ctx.fillStyle = '#fff';
                ctx.translate(75 - Math.floor(Math.random() * 150),
                    75 - Math.floor(Math.random() * 150));
                drawStar(ctx, Math.floor(Math.random() * 4) + 2);
                ctx.restore();
            }


            //动画-------------------------------------------------------------------------
            var ctx1 = canvas1.getContext('2d');
            ctx1.globalCompositeOperation = 'destination-over';
            ctx1.clearRect(0, 0, 300, 300); // clear canvas

            ctx1.fillStyle = 'rgba(0,0,0,0.4)';
            ctx1.strokeStyle = 'rgba(0,153,255,0.4)';
            ctx1.save();
            ctx1.translate(150, 150);

            // Earth
            var time = new Date();
            ctx1.rotate(((2 * Math.PI) / 60) * time.getSeconds() + ((2 * Math.PI) / 60000) * time.getMilliseconds());
            ctx1.translate(105, 0);
            ctx1.fillRect(0, -12, 50, 24); // Shadow
            ctx1.drawImage(earth, -12, -12);

            // Moon
            ctx1.save();
            ctx1.rotate(((2 * Math.PI) / 6) * time.getSeconds() + ((2 * Math.PI) / 6000) * time.getMilliseconds());
            ctx1.translate(0, 28.5);
            ctx1.drawImage(moon, -3.5, -3.5);
            ctx1.restore();

            ctx1.restore();

            ctx1.beginPath();
            ctx1.arc(150, 150, 105, 0, Math.PI * 2, false); // Earth orbit
            ctx1.stroke();

            ctx1.drawImage(sun, 0, 0, 300, 300);

            window.requestAnimationFrame(draw);

            //小球-------------------------------------------------------------------------
            var ctx3 = canvas3.getContext('2d');
            var raf;
            var running = false;
            var ball = {
                x: 100,
                y: 100,
                vx: 5,
                vy: 1,
                radius: 25,
                color: 'blue',
                draw: function() {
                    ctx3.beginPath();
                    ctx3.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
                    ctx3.closePath();
                    ctx3.fillStyle = this.color;
                    ctx3.fill();
                }
            };

            function clear() {
                ctx3.fillStyle = 'rgba(255,255,255,0.3)';
                ctx3.fillRect(0, 0, canvas.width, canvas.height);
            }

            function drawIn() {
                clear();
                ball.draw();
                ball.x += ball.vx;
                ball.y += ball.vy;

                if (ball.y + ball.vy > canvas.height || ball.y + ball.vy < 0) {
                    ball.vy = -ball.vy;
                }
                if (ball.x + ball.vx > canvas.width || ball.x + ball.vx < 0) {
                    ball.vx = -ball.vx;
                }

                raf = window.requestAnimationFrame(drawIn);
            }

            canvas.addEventListener('mousemove', function(e) {
                if (!running) {
                    clear();
                    ball.x = e.clientX;
                    ball.y = e.clientY;
                    ball.draw();
                }
            });

            canvas.addEventListener('click', function(e) {
                if (!running) {
                    raf = window.requestAnimationFrame(drawIn);
                    running = true;
                }
            });

            canvas.addEventListener('mouseout', function(e) {
                window.cancelAnimationFrame(raf);
                running = false;
            });

            ball.draw();



            //二次贝塞尔曲线--会话框-------------------------------------------------------------------------
            var ctx4 = canvas4.getContext('2d');


            //三次贝塞尔曲线--心-------------------------------------------------------------------------
            var ctx5 = canvas5.getContext('2d');


            //组合使用--游戏图-------------------------------------------------------------------------
            var ctx6 = canvas6.getContext('2d');
            //Path2D 示例-------------------------------------------------------------------------
            var ctx7 = canvas7.getContext('2d');


            //颜色--strokeStyle--------fillStyle---------------------------------------------------------------
            var ctx8 = canvas8.getContext('2d');


            //透明--globalAlpha--------------------------------------------------
            var ctx9 = canvas9.getContext('2d');
            // 画背景




            //--lineCap-------线段端点显示的样子-------------------------------------------
            var ctx10 = canvas10.getContext('2d');

            //--lineJoin-------图形中两线段连接处所显示的样子-------------------------------------------
            var ctx11 = canvas11.getContext('2d');


            //--线性渐变 createLinearGradient-------------------------------------------
            var ctx12 = canvas12.getContext('2d');


            //--球性渐变 createRadialGradient-------------------------------------------
            var ctx13 = canvas13.getContext('2d');



            //图案样式 Patterns-------------------------------------------
            var ctx14 = canvas14.getContext('2d');


            //文字阴影的例子-----------measureText--------------------------------
            var ctx15 = canvas15.getContext('2d');


            //save 和 restore 的应用例子-------------------------------------------
            var ctx16 = canvas16.getContext('2d');

            //save 和 restore 的应用例子-------------------------------------------
            var ctx17 = canvas17.getContext('2d');

        }
    }
    init();

    function drawStar(ctx, r) {
        ctx.save();
        ctx.beginPath()
        ctx.moveTo(r, 0);
        for (var i = 0; i < 9; i++) {
            ctx.rotate(Math.PI / 5);
            if (i % 2 == 0) {
                ctx.lineTo((r / 0.525731) * 0.200811, 0);
            } else {
                ctx.lineTo(r, 0);
            }
        }
        ctx.closePath();
        ctx.fill();
        ctx.restore();
    }

    function init() {
        sun.src = 'https://mdn.mozillademos.org/files/1456/Canvas_sun.png';
        moon.src = 'https://mdn.mozillademos.org/files/1443/Canvas_moon.png';
        earth.src = 'https://mdn.mozillademos.org/files/1429/Canvas_earth.png';
        window.requestAnimationFrame(draw);
    }


    function clock() {
        var now = new Date();
        var ctx = document.getElementById('tutorial2').getContext('2d');
        ctx.save();
        ctx.clearRect(0, 0, 150, 150);
        ctx.translate(75, 75);
        ctx.scale(0.4, 0.4);
        ctx.rotate(-Math.PI / 2);
        ctx.strokeStyle = 'black';
        ctx.fillStyle = 'white';
        ctx.lineWidth = 8;
        ctx.lineCap = 'round';

        // Hour marks
        ctx.save();
        for (var i = 0; i < 12; i++) {
            ctx.beginPath();
            ctx.rotate(Math.PI / 6);
            ctx.moveTo(100, 0);
            ctx.lineTo(120, 0);
            ctx.stroke();
        }
        ctx.restore();

        // Minute marks
        ctx.save();
        ctx.lineWidth = 5;
        for (i = 0; i < 60; i++) {
            if (i % 5 != 0) {
                ctx.beginPath();
                ctx.moveTo(117, 0);
                ctx.lineTo(120, 0);
                ctx.stroke();
            }
            ctx.rotate(Math.PI / 30);
        }
        ctx.restore();

        var sec = now.getSeconds();
        var min = now.getMinutes();
        var hr = now.getHours();
        hr = hr >= 12 ? hr - 12 : hr;

        ctx.fillStyle = "black";

        // write Hours
        ctx.save();
        ctx.rotate(hr * (Math.PI / 6) + (Math.PI / 360) * min + (Math.PI / 21600) * sec)
        ctx.lineWidth = 14;
        ctx.beginPath();
        ctx.moveTo(-20, 0);
        ctx.lineTo(80, 0);
        ctx.stroke();
        ctx.restore();

        // write Minutes
        ctx.save();
        ctx.rotate((Math.PI / 30) * min + (Math.PI / 1800) * sec)
        ctx.lineWidth = 10;
        ctx.beginPath();
        ctx.moveTo(-28, 0);
        ctx.lineTo(112, 0);
        ctx.stroke();
        ctx.restore();

        // Write seconds
        ctx.save();
        ctx.rotate(sec * Math.PI / 30);
        ctx.strokeStyle = "#D40000";
        ctx.fillStyle = "#D40000";
        ctx.lineWidth = 6;
        ctx.beginPath();
        ctx.moveTo(-30, 0);
        ctx.lineTo(83, 0);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(0, 0, 10, 0, Math.PI * 2, true);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(95, 0, 10, 0, Math.PI * 2, true);
        ctx.stroke();
        ctx.fillStyle = "rgba(0,0,0,0)";
        ctx.arc(0, 0, 3, 0, Math.PI * 2, true);
        ctx.fill();
        ctx.restore();

        ctx.beginPath();
        ctx.lineWidth = 14;
        ctx.strokeStyle = '#325FA2';
        ctx.arc(0, 0, 142, 0, Math.PI * 2, true);
        ctx.stroke();

        ctx.restore();

        window.requestAnimationFrame(clock);


    }
    window.requestAnimationFrame(clock);
    </script>
</body>

</html>