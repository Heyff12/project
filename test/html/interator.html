<!DOCTYPE html>
<html>

<head>
    <title>es6新性能</title>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <script>
    window.PointerEvent = void 0
    </script>
    <script type="text/javascript" src="../static/js/plug/flexible.debug.js"></script>
    <link rel="stylesheet" href="../static/css/home.css">
</head>

<body class="bg_body">
    <div id="wap">
        <header>
            <h2>es6新性能-Iterator和for...of循环</h2>
            <a class="title_a a_left back"></a>
        </header>
        <section class="bind descripe">
            <dl id="dl_clear">
                <dt class="green">1、Iterator（遍历器）的概念</dt>
                <dd>JavaScript原有的表示“集合”的数据结构，主要是数组（Array）和对象（Object），ES6又添加了Map和Set。</dd>
                <dd>遍历器（Iterator）就是这样一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。</dd>
                <dd>任何数据结构只要部署Iterator接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。</dd>
                <dd>Iterator的作用有三个：</dd>
                <dd>一是为各种数据结构，提供一个统一的、简便的访问接口</dd>
                <dd>二是使得数据结构的成员能够按某种次序排列；</dd>
                <dd>三是ES6创造了一种新的遍历命令for...of循环，Iterator接口主要供for...of消费。</dd>
                <dt class="green">2、数据结构的默认Iterator接口</dt>
                <dd>ES6规定，默认的Iterator接口部署在数据结构的Symbol.iterator属性，或者说，一个数据结构只要具有Symbol.iterator属性，就可以认为是“可遍历的”（iterable）。</dd>
                <dd>在ES6中，有三类数据结构原生具备Iterator接口：数组、某些类似数组的对象、Set和Map结构。</dd>
                <dt class="green">3、调用Iterator接口的场合</dt>
                <dd>（1）解构赋值</dd>
                <dd>（2）扩展运算符</dd>
                <dd>（3）yield*</dd>
                <dd>（4）其他场合</dd>
                <dt class="green">4、字符串的Iterator接口</dt>
                <dd>字符串是一个类似数组的对象，也原生具有Iterator接口。</dd>
                <dt class="green">5、Iterator接口与Generator函数</dt>
                <dd></dd>
                <dd></dd>
                <dd></dd>
                <dd></dd>
                <dt class="green">6、遍历器对象的return()，throw()</dt>
                <dd>return方法的使用场合是，如果for...of循环提前退出（通常是因为出错，或者有break语句或continue语句），就会调用return方法。如果一个对象在完成遍历前，需要清理或释放资源，就可以部署return方法。</dd>
                <dd>return方法必须返回一个对象，这是Generator规格决定的。</dd>
                <dd>throw方法主要是配合Generator函数使用，一般的遍历器对象用不到这个方法。</dd>
                <dd></dd>
                <dt class="green">7、for...of循环</dt>
                <dd>for...of循环可以使用的范围包括数组、Set 和 Map 结构、某些类似数组的对象（比如arguments对象、DOM NodeList 对象）、后文的 Generator 对象，以及字符串。</dd>
                <dd>数组原生具备iterator接口（即默认部署了Symbol.iterator属性），for...of循环本质上就是调用这个接口产生的遍历器，可以用下面的代码证明。</dd>
                <dd>JavaScript原有的for...in循环，只能获得对象的键名，不能直接获取键值。ES6提供for...of循环，允许遍历获得键值。</dd>
                <dd>for...of循环调用遍历器接口，数组的遍历器接口只返回具有数字索引的属性。这一点跟for...in循环也不一样。</dd>
                <dd>Set 和 Map 结构也原生具有 Iterator 接口，可以直接使用for...of循环。</dd>
                <dd>计算生成的数据结构</dd>
                <dd>有些数据结构是在现有数据结构的基础上，计算生成的。比如，ES6的数组、Set、Map 都部署了以下三个方法，调用后都返回遍历器对象。</dd>
                <dd>类似数组的对象---</dd>
                <dd>并不是所有类似数组的对象都具有 Iterator 接口，一个简便的解决方法，就是使用Array.from方法将其转为数组。</dd>
                <dd>对于普通的对象，for...of结构不能直接使用，会报错，必须部署了 Iterator 接口后才能使用。</dd>
                <dd>与其他遍历语法的比较</dd>
                <dd>以数组为例，JavaScript 提供多种遍历语法。最原始的写法就是for循环</dd>
                <dd>这种写法比较麻烦，因此数组提供内置的forEach方法。这种写法的问题在于，无法中途跳出forEach循环，break命令或return命令都不能奏效。</dd>
                <dd>for...in循环可以遍历数组的键名。</dd>
                <dd>for...of循环相比上面几种做法，有一些显著的优点。</dd>
                <dd>有着同for...in一样的简洁语法，但是没有for...in那些缺点。</dd>
                <dd>不同于forEach方法，它可以与break、continue和return配合使用。</dd>
                <dd>提供了遍历所有数据结构的统一操作接口。</dd>
            </dl>
        </section>
    </div>
    <script src="../static/js/home/iterator.js " type="text/javascript "defer async="true "></script>
    <script type="text/javascript">
    </script>
</body>

</html>
